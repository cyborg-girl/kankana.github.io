<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Context-Aware QA Agent Demo</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #0d0d0d;
      color: #e0e0e0;
      overflow-x: hidden;
    }
    h1 {
      text-align: center;
      margin-top: 30px;
      color: #ffffff;
    }
    #description {
      text-align: center;
      max-width: 800px;
      margin: 10px auto 30px auto;
      font-size: 1.1em;
      color: #cccccc;
    }
    #container {
      display: flex;
      justify-content: space-around;
      align-items: flex-start;
      flex-wrap: wrap;
      gap: 20px;
      padding: 20px;
    }
    .box {
      background: #1a1a1a;
      padding: 20px;
      border-radius: 12px;
      width: 45%;
      min-width: 300px;
      box-shadow: 0 0 10px rgba(255,255,255,0.1);
    }
    .box h2 {
      margin-top: 0;
      color: #fff;
    }
    textarea, input {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 6px;
      border: none;
      background: #2a2a2a;
      color: #fff;
    }
    button {
      background: #4cafef;
      border: none;
      padding: 10px 15px;
      margin-top: 10px;
      border-radius: 6px;
      cursor: pointer;
      color: #fff;
      font-weight: bold;
    }
    button:hover {
      background: #007acc;
    }
    .answer {
      margin-top: 15px;
      padding: 10px;
      background: #2e2e2e;
      border-radius: 6px;
      white-space: pre-wrap;
    }
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -1;
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>

  <h1>Context-Aware QA Agent Demo</h1>
  <div id="description">
    This demo shows how providing context can significantly improve the quality of AI answers. 
    The same model is used in both cases ‚Äî but with context, the answers become more specific and useful.
  </div>

  <div id="container">
    <!-- Without Context -->
    <div class="box">
      <h2>Without Context</h2>
      <input type="text" id="question1" placeholder="Ask a question...">
      <button id="ask1">Ask</button>
      <div id="answer1" class="answer"></div>
    </div>

    <!-- With Context -->
    <div class="box">
      <h2>With Context</h2>
      <textarea id="context" placeholder="Paste supporting context here..."></textarea>
      <input type="text" id="question2" placeholder="Ask a question...">
      <button id="ask2">Ask</button>
      <div id="answer2" class="answer"></div>
    </div>
  </div>

  <!-- ‚úÖ Load Xenova Transformers (UMD build for browsers) -->
  <script src="https://cdn.jsdelivr.net/npm/@xenova/transformers/dist/transformers.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  
  <script>
    let qaPipeline;

    // Initialize pipeline
    (async () => {
      document.getElementById("answer1").textContent = "‚è≥ Loading model...";
      document.getElementById("answer2").textContent = "‚è≥ Loading model...";

      qaPipeline = await window.transformers.pipeline(
        "question-answering",
        "Xenova/distilbert-base-cased-distilled-squad"
      );

      document.getElementById("answer1").textContent = "‚úÖ Model loaded. Ask a question.";
      document.getElementById("answer2").textContent = "‚úÖ Model loaded. Provide context and ask.";
    })();

    // Ask without context
    document.getElementById("ask1").onclick = async () => {
      const question = document.getElementById("question1").value.trim();
      if (!question || !qaPipeline) return;

      document.getElementById("answer1").textContent = "‚è≥ Processing...";
      // Use empty context to simulate no knowledge
      const result = await qaPipeline({ question, context: " " });
      document.getElementById("answer1").textContent = "ü§ñ Answer: " + result.answer;
    };

    // Ask with context
    document.getElementById("ask2").onclick = async () => {
      const question = document.getElementById("question2").value.trim();
      const context = document.getElementById("context").value.trim();
      if (!question || !context || !qaPipeline) return;

      document.getElementById("answer2").textContent = "‚è≥ Processing...";
      const result = await qaPipeline({ question, context });
      document.getElementById("answer2").textContent = "ü§ñ Answer: " + result.answer;
    };

    // Particles background
    particlesJS("particles-js", {
      "particles": {
        "number": { "value": 80 },
        "size": { "value": 3 },
        "move": { "speed": 1 },
        "line_linked": { "enable": true }
      }
    });
  </script>
</body>
</html>
