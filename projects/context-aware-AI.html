<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Context-Aware QA Agent Demo</title>
<script type="module">
import { pipeline } from 'https://cdn.jsdelivr.net/npm/@xenova/transformers/dist/transformers.min.js';

let qaPipeline = null;

async function loadPipeline() {
    try {
        qaPipeline = await pipeline('question-answering', 'Xenova/distilbert-base-cased-distilled-squad');
        document.getElementById('status').textContent = "Model loaded âœ…";
    } catch (err) {
        console.error(err);
        document.getElementById('status').textContent = "Failed to load model";
    }
}

async function askQuestion() {
    const qEl = document.getElementById('question');
    const cEl = document.getElementById('context');
    const aEl = document.getElementById('answer');

    const question = (qEl.value || "").trim();
    const context = (cEl.value || "").trim();

    if (!qaPipeline) return alert("Model not loaded yet!");
    if (!question) return alert("Enter a question.");

    aEl.textContent = "Processing...";

    try {
        const output = await qaPipeline({ question, context });
        aEl.textContent = output.answer;
    } catch (err) {
        console.error(err);
        aEl.textContent = "Error: " + err;
    }
}

window.addEventListener('DOMContentLoaded', loadPipeline);
</script>
</head>
<body>
<h1>Context-Aware QA Agent Demo</h1>
<div id="status">Loading model...</div>
<textarea id="context" placeholder="Context (optional)"></textarea><br>
<textarea id="question" placeholder="Your question"></textarea><br>
<button onclick="askQuestion()">Ask</button>
<div id="answer" style="margin-top:12px; background:#eee; padding:8px; border-radius:8px;"></div>
</body>
</html>
