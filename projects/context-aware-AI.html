<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Context-Aware QA Agent Demo</title>
  <style>
    body {
      margin:0;
      font-family: 'Arial', sans-serif;
      background:#0d1117;
      color:#e6edf3;
    }
    #particles-js {position:fixed;width:100%;height:100%;z-index:-1;}
    .container {max-width:1200px;margin:0 auto;padding:2rem;}
    h1 {text-align:center;font-size:2.2rem;margin-bottom:0.5rem;}
    p.intro {text-align:center;font-size:1rem;color:#9ba4b5;margin-bottom:2rem;}
    .grid {display:grid;grid-template-columns:1fr 1fr;gap:1rem;}
    .box {background:#161b22;padding:1rem;border-radius:12px;box-shadow:0 0 12px rgba(0,0,0,0.4);}
    textarea {width:100%;min-height:60px;padding:0.5rem;border-radius:8px;border:none;resize:vertical;}
    button {margin-top:0.5rem;padding:0.5rem 1rem;border:none;border-radius:8px;background:#238636;color:white;cursor:pointer;}
    button:hover {background:#2ea043;}
    .answer {margin-top:1rem;padding:0.5rem;background:#0d1117;border-radius:8px;min-height:60px;white-space:pre-wrap;}
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <div class="container">
    <h1>Context-Aware QA Agent Demo</h1>
    <p class="intro">This demo shows how context engineering changes responses. The same model produces richer answers when extra context is supplied.</p>
    
    <div class="grid">
      <div class="box">
        <h2>Without Context</h2>
        <textarea id="question" placeholder="Ask a question..."></textarea>
        <button onclick="answer(false)">Ask Without Context</button>
        <div class="answer" id="noContextAns"></div>
      </div>
      <div class="box">
        <h2>With Context</h2>
        <textarea id="context" placeholder="Provide extra context..."></textarea>
        <button onclick="answer(true)">Ask With Context</button>
        <div class="answer" id="withContextAns"></div>
      </div>
    </div>
  </div>

  <!-- Particles.js -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script>
    particlesJS("particles-js", {
      "particles":{"number":{"value":60},"size":{"value":2},"color":{"value":"#ffffff"},
      "line_linked":{"enable":true,"color":"#ffffff"},"move":{"speed":1.5},
      "interactivity":{"events":{"onhover":{"enable":true,"mode":"repulse"}}}
    );
  </script>

  <!-- Transformers.js -->
  <script type="module">
    import { pipeline } from "https://cdn.jsdelivr.net/npm/@xenova/transformers/dist/transformers.min.js";

    let qaPipeline;
    async function loadModel() {
      qaPipeline = await pipeline("question-answering", "Xenova/distilbert-base-cased-distilled-squad", { quantized: true });
      console.log("QA model loaded");
    }
    loadModel();

    async function answer(useContext) {
      const q = document.getElementById("question").value.trim();
      const ctx = document.getElementById("context").value.trim();
      if (!q) { alert("Please enter a question."); return; }
      if (!qaPipeline) { alert("Model not loaded yet. Please wait..."); return; }

      // if no context, use a default general passage
      const passage = useContext && ctx ? ctx : 
        "This is a general knowledge base without specific context. It may only give a broad, less precise answer.";

      const result = await qaPipeline({ question: q, context: passage });
      if (useContext) {
        document.getElementById("withContextAns").textContent = result.answer;
      } else {
        document.getElementById("noContextAns").textContent = result.answer;
      }
    }
  </script>
</body>
</html>
