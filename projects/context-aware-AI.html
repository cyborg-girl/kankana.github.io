<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Context-Aware QA Agent Demo</title>
  <style>
    body {
      margin:0;
      font-family: 'Arial', sans-serif;
      background:#0d1117;
      color:#e6edf3;
      overflow:hidden;
    }
    #particles-js {position:fixed;width:100%;height:100%;z-index:-1;}
    .container {max-width:1200px;margin:0 auto;padding:2rem;}
    h1 {text-align:center;font-size:2.2rem;margin-bottom:0.5rem;}
    p.intro {text-align:center;font-size:1rem;color:#9ba4b5;margin-bottom:2rem;}
    .grid {display:grid;grid-template-columns:1fr 1fr;gap:1rem;}
    .box {background:#161b22;padding:1rem;border-radius:12px;box-shadow:0 0 12px rgba(0,0,0,0.4);}
    textarea {width:100%;min-height:60px;padding:0.5rem;border-radius:8px;border:none;resize:vertical;}
    button {margin-top:0.5rem;padding:0.5rem 1rem;border:none;border-radius:8px;background:#238636;color:white;cursor:pointer;}
    button:hover {background:#2ea043;}
    .answer {margin-top:1rem;padding:0.5rem;background:#0d1117;border-radius:8px;min-height:50px;}
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <div class="container">
    <h1>Context-Aware QA Agent Demo</h1>
    <p class="intro">This demo shows how context engineering changes responses from the same seed. The agent produces different answers depending on whether context is provided.</p>
    
    <div class="grid">
      <div class="box">
        <h2>Without Context</h2>
        <textarea id="question" placeholder="Ask a question..."></textarea>
        <button onclick="answer(false)">Ask Without Context</button>
        <div class="answer" id="noContextAns"></div>
      </div>
      <div class="box">
        <h2>With Context</h2>
        <textarea id="context" placeholder="Provide extra context..."></textarea>
        <button onclick="answer(true)">Ask With Context</button>
        <div class="answer" id="withContextAns"></div>
      </div>
    </div>
  </div>

  <!-- Particles.js -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script>
    particlesJS("particles-js", {
      "particles":{"number":{"value":80},"size":{"value":2},"color":{"value":"#ffffff"},
      "line_linked":{"enable":true,"color":"#ffffff"},"move":{"speed":2}},
      "interactivity":{"events":{"onhover":{"enable":true,"mode":"repulse"}}}
    );
  </script>

  <!-- Demo AI Logic -->
  <script>
    // Simple seeded random generator
    function mulberry32(a) {
      return function() {
        var t = a += 0x6D2B79F5;
        t = Math.imul(t ^ t >>> 15, t | 1);
        t ^= t + Math.imul(t ^ t >>> 7, t | 61);
        return ((t ^ t >>> 14) >>> 0) / 4294967296;
      }
    }

    // Mock "model" with random but seeded outputs
    function generateAnswer(seed, question, context="") {
      let rand = mulberry32(seed);
      let baseAnswers = [
        `That’s an interesting question. I think it depends a lot on perspective.`,
        `From what I can tell, the answer lies in patterns we’ve seen before.`,
        `It seems related to something we already understand.`,
        `I would explain it in terms of cause and effect.`,
        `It’s complicated, but I’ll try to simplify.`
      ];
      let ans = baseAnswers[Math.floor(rand()*baseAnswers.length)];
      if(context.trim() !== "") {
        ans += " With the given context, it becomes clearer: " + context.split(" ").slice(0,6).join(" ") + "...";
      }
      return ans;
    }

    function answer(useContext){
      const q=document.getElementById("question").value.trim();
      const ctx=document.getElementById("context").value.trim();
      if(!q){alert("Please enter a question.");return;}
      let seed = q.length; // deterministic seed from question
      let ans = generateAnswer(seed,q,useContext?ctx:"");
      if(useContext){
        document.getElementById("withContextAns").textContent=ans;
      } else {
        document.getElementById("noContextAns").textContent=ans;
      }
    }
  </script>
</body>
</html>
