<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Context-Aware QA Agent Demo</title>

<!-- CVless theme-like dark styling -->
<style>
:root {
  --bg: #0d0d0d;
  --card: rgba(29,53,87,0.85);
  --accent: #4cc9f0;
  --muted: #bfc9d9;
}
html, body { margin:0; padding:0; height:100%; background: var(--bg); font-family: "Inter", sans-serif; color: #fff;}
#particles-js { position:fixed; inset:0; z-index:-1; }
.container { display:flex; flex-wrap:wrap; justify-content:center; gap:24px; padding:24px;}
.card { background: var(--card); padding:24px; border-radius:16px; box-shadow: 0 12px 40px rgba(0,0,0,0.6); width: 400px;}
h1 { color: var(--accent); text-align:center; }
textarea { width:100%; height:80px; border-radius:10px; padding:8px; border:none; resize:none;}
button { padding:10px 16px; border:none; border-radius:10px; font-weight:700; cursor:pointer; background:linear-gradient(135deg,var(--accent),#4895ef); color:#0b1020; margin-top:8px;}
.status { font-size:0.9rem; color: var(--muted); margin-top:6px;}
.output { background: rgba(0,0,0,0.12); padding:12px; border-radius:10px; margin-top:8px; min-height:40px;}
.note { font-size:0.85rem; color: var(--muted); margin-top:6px;}
</style>

<!-- Particles.js -->
<script src="https://cdn.jsdelivr.net/npm/particles.js"></script>
</head>
<body>

<div id="particles-js"></div>

<h1>Context-Aware QA Agent Demo</h1>
<div class="note" style="text-align:center; max-width:900px; margin:auto;">
This demo shows how the same AI question can produce different answers when given contextual information. Type a question below and see the difference between answers <strong>without context</strong> and <strong>with context</strong>.
</div>

<div class="container">
  <!-- Without Context -->
  <div class="card">
    <h2>Without Context</h2>
    <textarea id="questionNoContext" placeholder="Enter your question here..."></textarea>
    <button id="askNoContextBtn">Ask</button>
    <div class="status" id="statusNo">Model loading...</div>
    <div class="output" id="outputNo">Answer will appear here</div>
  </div>

  <!-- With Context -->
  <div class="card">
    <h2>With Context</h2>
    <textarea id="questionWithContext" placeholder="Enter your question here..."></textarea>
    <textarea id="contextInput" placeholder="Enter context here..."></textarea>
    <button id="askWithContextBtn">Ask</button>
    <div class="status" id="statusWith">Model loading...</div>
    <div class="output" id="outputWith">Answer will appear here</div>
  </div>
</div>

<!-- Load Transformers.js and setup QA pipeline -->
<script type="module">
import { pipeline } from 'https://cdn.jsdelivr.net/npm/@xenova/transformers/dist/transformers.min.js';

// Global pipeline variable
window.qaPipeline = null;

// Load the model
async function loadQAModel() {
  const statusNo = document.getElementById('statusNo');
  const statusWith = document.getElementById('statusWith');
  try {
    statusNo.textContent = 'Loading QA model...';
    statusWith.textContent = 'Loading QA model...';
    window.qaPipeline = await pipeline('question-answering', 'Xenova/distilbert-base-cased-distilled-squad');
    statusNo.textContent = 'Model loaded ✅';
    statusWith.textContent = 'Model loaded ✅';
  } catch(e) {
    console.error(e);
    statusNo.textContent = 'Failed to load model';
    statusWith.textContent = 'Failed to load model';
  }
}
loadQAModel();
</script>

<script>
// Buttons
const askNoContextBtn = document.getElementById('askNoContextBtn');
const askWithContextBtn = document.getElementById('askWithContextBtn');

askNoContextBtn.addEventListener('click', async ()=>{
  const question = document.getElementById('questionNoContext').value.trim();
  const output = document.getElementById('outputNo');
  const status = document.getElementById('statusNo');
  if(!question) return;
  if(!window.qaPipeline) { output.textContent = "Model not ready."; return; }
  status.textContent = "Answering...";
  try {
    const ans = await window.qaPipeline({ question, context:"" });
    output.textContent = ans.answer;
    status.textContent = "Done ✅";
  } catch(e) {
    console.error(e);
    output.textContent = "Error. See console.";
    status.textContent = "Error";
  }
});

askWithContextBtn.addEventListener('click', async ()=>{
  const question = document.getElementById('questionWithContext').value.trim();
  const context = document.getElementById('contextInput').value.trim();
  const output = document.getElementById('outputWith');
  const status = document.getElementById('statusWith');
  if(!question) return;
  if(!window.qaPipeline) { output.textContent = "Model not ready."; return; }
  status.textContent = "Answering...";
  try {
    const ans = await window.qaPipeline({ question, context: context || "" });
    output.textContent = ans.answer;
    status.textContent = "Done ✅";
  } catch(e) {
    console.error(e);
    output.textContent = "Error. See console.";
    status.textContent = "Error";
  }
});
</script>

<!-- Particles.js -->
<script>
particlesJS("particles-js", {
  particles: { number:{value:70}, size:{value:3}, move:{speed:1}, line_linked:{ enable:true, distance:140, color:"#4cc9f0" }, color:{value:"#4cc9f0"} },
  interactivity: { events: { onhover: { enable:true, mode:"repulse" } } }
});
</script>
</body>
</html>
