<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Visual Agent - Text-to-Image Demo</title>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.4/lib/p5.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ml5@2.3.0/dist/ml5.min.js"></script>
  <style>
    body { background: #111; color: #eee; font-family: sans-serif; text-align: center; }
    canvas { margin-top: 10px; border: 2px solid #333; }
    input, button { padding: 8px; margin: 5px; border-radius: 5px; border: none; }
    button { cursor: pointer; background: #444; color: white; }
    button:hover { background: #666; }
  </style>
</head>
<body>
  <h1>ðŸŽ¨ AI Visual Agent - Text-to-Image Demo</h1>
  <input id="prompt" placeholder="Type a prompt (e.g., 'bear in a spaceship')">
  <button onclick="generateImage()">Generate Image</button>
  <button onclick="saveCanvas('drawing','png')">Save PNG</button>
  <div id="output"></div>

  <script>
    let model;
    let img;

    function setup() {
      createCanvas(600, 400);
      model = ml5.imageGenerator('StableDiffusion', modelReady);
    }

    function modelReady() {
      console.log('Model Loaded!');
    }

    function generateImage() {
      const prompt = document.getElementById('prompt').value;
      if (prompt) {
        model.generate(prompt, gotResult);
      } else {
        alert('Please enter a prompt!');
      }
    }

    function gotResult(err, results) {
      if (err) {
        console.error(err);
        return;
      }
      if (results && results[0]) {
        img = createImg(results[0].src, '');
        img.hide();
        image(img, 0, 0, width, height);
      }
    }
  </script>
</body>
</html>
