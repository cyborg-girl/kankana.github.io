<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Visual Agent - Painterly Animals Demo</title>
<script src="https://cdn.jsdelivr.net/npm/p5@1.9.4/lib/p5.min.js"></script>
<style>
body { background: #111; color: #eee; font-family: sans-serif; text-align: center; }
canvas { margin-top: 10px; border: 2px solid #333; }
input, button { padding: 8px; margin: 5px; border-radius: 5px; border: none; }
button { cursor: pointer; background: #444; color: white; }
button:hover { background: #666; }
</style>
</head>
<body>
<h1>ðŸŽ¨ AI Visual Agent - Painterly Animals Demo</h1>
<input id="prompt" placeholder="Type a prompt (bear, cat, dog, bird)">
<button onclick="generateArt()">Draw</button>
<button onclick="saveCanvas('drawing','png')">Save PNG</button>

<script>
let promptWord = "";
let animatedObjects = [];
let baseGraphics;

function setup() {
  createCanvas(600, 400);
  baseGraphics = createGraphics(width, height);
  baseGraphics.background("#222");
}

function generateArt() {
  promptWord = document.getElementById("prompt").value.toLowerCase();
  animatedObjects = [];
  baseGraphics.background("#222");
  drawPrompt();
  loop();
}

function draw() {
  background("#222");
  image(baseGraphics,0,0); // static drawing

  animatedObjects.forEach(obj=>{
    if(obj.type==='sun'){
      push(); translate(obj.x,obj.y); rotate(obj.angle);
      fill(255,204,0); ellipse(0,0,150);
      for(let a=0;a<TWO_PI;a+=PI/12){ line(0,0,cos(a)*100,sin(a)*100); }
      pop();
      obj.angle += 0.01;
    }
    else if(obj.type==='balloon'){
      fill(255,0,200); ellipse(obj.x,obj.y,60);
      stroke(200); line(obj.x,obj.y+10,obj.x,obj.y+50);
      obj.y -= 0.5; if(obj.y<-60) obj.y=height+60;
    }
    else if(obj.type==='star'){
      fill(255,255,0, random(100,255)); ellipse(obj.x,obj.y,obj.size);
    }
  });
}

// Painterly brush
function fuzzyBrush(pg,x,y,size,col){
  pg.noStroke();
  pg.fill(col[0],col[1],col[2],100);
  for(let i=0;i<40;i++){
    pg.ellipse(x+random(-size/2,size/2),y+random(-size/2,size/2),random(size*0.7,size));
  }
}

// Animal drawings with eyes, nose, mouth, ears
function drawBear(pg){
  // body
  fuzzyBrush(pg,width/2,height/2+40,120,[139,69,19]);
  // head
  fuzzyBrush(pg,width/2,height/2-40,80,[139,69,19]);
  // ears
  fuzzyBrush(pg,width/2-40,height/2-80,40,[139,69,19]);
  fuzzyBrush(pg,width/2+40,height/2-80,40,[139,69,19]);
  // eyes
  pg.fill(0); pg.ellipse(width/2-15,height/2-45,15);
  pg.ellipse(width/2+15,height/2-45,15);
  // nose
  pg.fill(0); pg.ellipse(width/2,height/2-20,20,15);
  // mouth
  pg.noFill(); pg.stroke(0); pg.strokeWeight(3);
  pg.arc(width/2,height/2-10,40,20,0,PI);
}

function drawCat(pg){
  // body
  fuzzyBrush(pg,width/2,height/2+30,100,[200,150,100]);
  // head
  fuzzyBrush(pg,width/2,height/2-40,60,[200,150,100]);
  // ears
  pg.triangle(width/2-30,height/2-70,width/2-50,height/2-100,width/2-10,height/2-70);
  pg.triangle(width/2+30,height/2-70,width/2+50,height/2-100,width/2+10,height/2-70);
  // eyes
  pg.fill(0); pg.ellipse(width/2-15,height/2-50,10); pg.ellipse(width/2+15,height/2-50,10);
  // whiskers
  pg.line(width/2-25,height/2-40,width/2-60,height/2-40);
  pg.line(width/2+25,height/2-40,width/2+60,height/2-40);
  // mouth
  pg.strokeWeight(2);
  pg.arc(width/2,height/2-35,15,10,0,PI);
}

function drawDog(pg){
  // body
  fuzzyBrush(pg,width/2,height/2+30,100,[160,82,45]);
  // head
  fuzzyBrush(pg,width/2,height/2-40,60,[160,82,45]);
  // ears
  fuzzyBrush(pg,width/2-40,height/2-60,30,[160,82,45]);
  fuzzyBrush(pg,width/2+40,height/2-60,30,[160,82,45]);
  // eyes
  pg.fill(0); pg.ellipse(width/2-10,height/2-45,10); pg.ellipse(width/2+10,height/2-45,10);
  // nose
  pg.fill(0); pg.ellipse(width/2,height/2-30,15,10);
  // mouth
  pg.noFill(); pg.stroke(0); pg.strokeWeight(2);
  pg.arc(width/2,height/2-20,30,15,0,PI);
}

function drawBird(pg){
  // body
  fuzzyBrush(pg,width/2,height/2,60,[255,255,100]);
  // wings
  pg.triangle(width/2-30,height/2,width/2-50,height/2-20,width/2-10,height/2-20);
  pg.triangle(width/2+30,height/2,width/2+50,height/2-20,width/2+10,height/2-20);
  // eyes
  pg.fill(0); pg.ellipse(width/2,height/2-10,8);
}

// Main prompt dispatcher
function drawPrompt(){
  if(promptWord.includes("bear")) drawBear(baseGraphics);
  else if(promptWord.includes("cat")) drawCat(baseGraphics);
  else if(promptWord.includes("dog")) drawDog(baseGraphics);
  else if(promptWord.includes("bird")) drawBird(baseGraphics);
  else if(promptWord.includes("sun")) animatedObjects.push({type:'sun',x:width/2,y:height/2,angle:0});
  else if(promptWord.includes("balloon")) animatedObjects.push({type:'balloon',x:width/2,y:height/2-50});
  else if(promptWord.includes("star")) animatedObjects.push({type:'star',x:random(width),y:random(height),size:random(5,15)});
  else { // fallback abstract
    for(let i=0;i<200;i++){ fuzzyBrush(baseGraphics,random(width),random(height),random(20,80),[random(255),random(255),random(255)]);}
  }
}
</script>
</body>
</html>
